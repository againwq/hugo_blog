---
author: "xqc"
title: "5G网络架构及组网部署"
date: 2024-04-16
series: ["compete"]
tags: ["大唐杯"]
ShowToc: true
TocOpen: true
---


## 5G网络架构
### 5G网络架构概述
![5G网络架构](/images/5G网络架构和组网部署/5G网络架构.PNG)
![5G网络详细架构](/images/5G网络架构和组网部署/5G网络详细架构.PNG)
+ 5G移动通信系统包括**5GC(5G核心网)**和**NG-RAN(无线接入网)**
+ **ng-eNB**: 增强型4G基站,可完成部分5G功能
+ **gNB**: 5G基站(对应4G中的**eNB**)
+ **Xn接口**: 基站间接口(对应4G中的**X2接口**),传输数据和信令
+ **NG接口**: 接入网网元接入到核心网的接口(对应4G中的**S1接口**)
+ **5G核心网网元**: *AMF, UPF, SMF*
+ **AAU**: RRU(射频单元) + 天线
+ **CU和DU**: CU是集中单元,DU是分布单元,CU、DU可以集中部署也可以分开部署

**5G基站 = CU + DU + AAU**,但是CU一般集中部署在靠近5GC的位置,AAU部署在靠近UE端的位置

### 核心网和接入网的架构演进

1. 核心网架构演进
   
![核心网架构演进](/images/5G网络架构和组网部署/核心网架构演进.PNG)

2. 接入网架构演进

![接入网架构演进](/images/5G网络架构和组网部署/接入网架构演进.PNG)

**需要注意5G中接入网各个网元与协议栈对应关系**
+ CU: RRC层 + PDCP层
+ DU: RLC层 + MAC层 + 部分PHY层
+ AAU: 部分PHY层

### 5G网元功能及其接口

#### 5G网元以及接口表示

![5G网元及接口表示](/images/5G网络架构和组网部署/5G接口表示.PNG)

+ 点对点接口表示(N1,N2,N3 ....)
+ 服务接口表示(基于服务的接口表示,Nnssf,Nnef...)
  
#### CU与DU

![CU与DU结构](/images/5G网络架构和组网部署/CU与DU结构.PNG)

+ CU可以分为CU-C(控制面)与CU-U(用户面)
+ CU与DU之间的接口是**F1接口**
+ CU-C与CU-U之间的接口是**E1接口**
+ CU包含**RRC层与PDCP层**, CU-C包含*RRC与PDCP的控制面功能*,CU-U就包含*PDCP的用户面功能*

CU与DU的协议栈划分:

![CU与DU的协议栈划分](/images/5G网络架构和组网部署/CU与DU协议栈划分.PNG)

+ CU占的协议栈越多,越方便控制面集中,集中化调度性能提升,但是传输带宽会升高,时延要求也更高(要求时延越低)
+ 3GPP标准划分方案为**Option2**,**将PDCP划分到CU中**,PDCP上移容易形成**数据锚点**,便于支持**双链接/单连接**

#### 5G主要网元功能

![5G主要网元功能](/images/5G网络架构和组网部署/5G主要网元功能.PNG)

**UFP**
1. gNB间切换的**本地移动锚点**
2. 连接到移动通信网络外部的PDU会话点
3. 用户数据包的**路由与转发**
4. 对**用户**的**Qos流**的映射与处理

**SMF**
1. **PDU会话**的建立与删除
2. UE **IP地址的分配**
3. 选择控制用户控制面功能(**选择UPF**)
4. Qos的策略与控制

**AMF**
1. **NAS信令**及信令的**加密与完整性保护**
2. 为在**UE与SMF之间的SM消息**提供传输
3. 用户鉴权及密钥管理
4. **连接与注册**管理

**CU-C**
1. Xn、E1、F1、NG接口的管理
2. 连接管理(单连接、双连接、多连接等)
3. 系统间和系统内负载均衡
4. 系统间和系统内切片资源管理

**CU-U**

数据包的处理与转换

**DU**
1. 资源的调度
2. **信道映射**(MAC层)
3. 传输模式的转换(RLC层)

**AAU-RF**
1. 信号的收发
2. MIMO天线处理
3. AAS实现机制
4. 频率与时间同步


#### 5G各个接口协议栈

**NG接口(5GC与NG-RAN)**

![NG接口协议栈](/images/5G网络架构和组网部署/NG接口协议栈.PNG)

**Xn接口(gNB之间)**

![Xn接口协议栈](/images/5G网络架构和组网部署/Xn接口协议栈.PNG)

**E1接口(CU-C与CU-U)**

该接口只有控制面(**只传输信令**)

![E1接口协议栈](/images/5G网络架构和组网部署/E1接口协议栈.PNG)


**F1接口(CU与DU)**

![F1接口协议栈](/images/5G网络架构和组网部署/F1接口协议.PNG)

主要就是控制面用**SCTP**协议,用户面用**GTP-U + UDP**协议

#### Uu口协议栈(UE与基站之间的接口)

**控制面**

![Uu口控制面协议栈](/images/5G网络架构和组网部署/Uu口控制面协议栈.PNG)

**RRC**层是作为一个代表在UE与gNB之间进行交互的,因此UE的接入过程主要是去看RRC相关的信令流程

**用户面**

![Uu口用户面协议栈](/images/5G网络架构和组网部署/Uu口用户面协议栈.PNG)

Qos的映射主要是**SDAP**层的功能，SDAP是5G中新加入的协议层

## 5G组网部署

**SA**: **独立组网**,终端同一时刻只需要接入5G基站,再接入5GC
**NSA**: **非独立组网**,终端同一时刻需要同时接入5G和4G基站(5G基站不足以提供完整的5G服务,需要4G基站辅助),再接入4G核心网(**EPC**)或5G核心网

### SA组网方案(最终目标)

1. **option2**:  *gNB + 5GC*
2. **option5**: *ng-eNB + 5GC*

![SA组网方案](/images/5G网络架构和组网部署/SA组网方案.PNG)

### NSA组网方案(过渡方案)

1. **option3系列**: *en-gNB(4G网络中的5G基站) + eNB(4G基站) + EPC(4G核心网)*

此时主要**通过eNB接入核心网**(S1接口), 主要解决5G初期的**覆盖范围问题**

![option3 NSA组网](/images/5G网络架构和组网部署/option3系列组网.PNG)

2. **option7系列**: *ng-eNB + gNB + 5GC*

此时主要**通过ng-eNB接入核心网**(NG接口,gNB与核心网无信令交互),主要面向**5G容量需求**

![option7 NSA组网](/images/5G网络架构和组网部署/option7系列组网.PNG)

3. **option4系列**: *ng-eNB + gNB + 5GC*

此时主要**通过gNB接入核心网**(NG接口,gNB与核心网进行信令交互)

![option4 NSA组网](/images/5G网络架构和组网部署/option4系列组网.PNG)


### CU与DU分离部署方案

![CU与DU部署方案](/images/5G网络架构和组网部署/CU与DU部署方案.PNG)

**eMBB(增强移动带宽场景,高速率,大带宽)业务**

1. 满足**带宽与速率**要求:

![eMBB场景CU与DU分离部署1](/images/5G网络架构和组网部署/CU与DU分离部署1.PNG)

2. 满足**容量与覆盖**要求:
 
多个DU联合部署形成**DU池**

![eMBB场景CU与DU分离部署2](/images/5G网络架构和组网部署/CU与DU分离部署2.PNG)

3. 满足不同**时延**要求:

**CU与DU合设**降低时延

![eMBB场景CU与DU分离部署3](/images/5G网络架构和组网部署/CU与DU分离部署3.PNG)


**大连接m-MTC场景需求**

CU**集中部署**,DU与AAU**就近部署**

![m-MTC场景CU与DU部署](/images/5G网络架构和组网部署/CU与DU分离部署4.PNG)

注: **理想前传**条件下DU集中部署,非理想前传条件下DU在RRU就近部署(远端部署)
